  int estado;
  char dato;
  if (Serial.available() > 0)
  switch (estado)
{
case 0:
{
 dato=Serial.read();
  if (dato=='1')
    estado=1;
}

case 1:
{
  tiempo=hora ();
  motor (tiempo); luz=ldr ();
  movimiento=detector_presencia ();
  bombilla (luz, movimiento);  
  correcto=clave ();
  puerta (correcto);
  dato=Serial.read();
  if (dato=='0')
   estado=0;
}
}
}




